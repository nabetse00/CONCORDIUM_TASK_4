import{e as I,f as w,j as t}from"./index-81a7a782.js";import{r as n}from"./wallet-0d6fe0b8.js";import{N as E}from"./NoAccount-efe08d43.js";import{i as B,a as N,T as O,u as R,b as z}from"./tokenAFn-b5d97af9.js";import{g as h,S as k,q as j,s as g,B as b,R as H,f as S,u as q,I as K}from"./ui-828740c4.js";import{b as P}from"./main-dbfd49a8.js";import"./icons-bd61ed92.js";function M(){const{connection:o,account:s,network:l}=I(),[V,a]=n.useState(""),[i,r]=n.useState(!1),[u,d]=n.useState(),A=w(),[m,C]=n.useState(),[p,x]=n.useState([!1]),[c,T]=n.useState(0),f=e=>{e&&T(e)};n.useEffect(()=>{(!o||!s)&&(console.log("redirect"),A(P)),o&&s&&!i&&(B(o,s).then(e=>{C(e),a("")}).catch(e=>{console.error(e),a(e)}),N(o,s).then(e=>{e?(x(e),a("")):(x([!1]),a(""))}).catch(e=>{console.error(e),a(e)}))},[o,s,i,u]);function _(){r(!1)}function v(){o&&s&&(r(!0),R(o,s).then(e=>{console.log("success then in add contract"),d(e),a("")}).catch(e=>{console.error(e),r(!1),a(e)}))}function y(){o&&s&&(r(!0),d(""),z(o,s,c*1e6).then(e=>{console.log("txn hash: "+e),d(e),a("")}).catch(e=>{console.error(e),r(!1),a(e)}))}return t.jsx(n.Suspense,{fallback:t.jsx(h,{}),children:o&&s?t.jsxs(k,{direction:"vertical",size:"middle",children:[t.jsxs(j,{title:"Your Token A data",style:{backgroundColor:g[0]},children:[t.jsxs("p",{children:["Token A balance: ",m?parseInt(m[0])/1e6:0," TOK_A "]}),t.jsxs("p",{children:["Is concordium-swap contract an operator of your account? ",p[0]?"✅ you can use this dispenser 😄":"❌ use bellow button to change that 😓"," "]}),o&&t.jsx(b,{type:"primary",loading:i,disabled:p[0],onClick:()=>v(),children:"Click to set concordium swap as operator for token A"})]}),t.jsx(j,{title:"Token A dispenser",style:{backgroundColor:g[0]},children:t.jsxs(k,{direction:"vertical",size:"middle",children:[t.jsxs(H,{style:{minWidth:"400px"},children:[t.jsx(S,{span:15,children:t.jsx(q,{min:1,max:100,onChange:f,value:typeof c=="number"?c:0})}),t.jsx(S,{span:4,children:t.jsx(K,{min:1,max:100,style:{margin:"0 16px"},value:c,onChange:f})})]}),t.jsxs(b,{type:"primary",loading:i,disabled:!p[0],onClick:()=>y(),children:["Send me ",c," token A please!"]})]})}),u&&t.jsx(O,{hash:u,connection:o,callback:_})]}):s?t.jsx(h,{}):t.jsx(E,{network:l==null?void 0:l.name})})}export{M as TokenAPage};

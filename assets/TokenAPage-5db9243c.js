import{e as I,f as w,j as t}from"./index-b84a6c5a.js";import{g as h,S as k,q as j,s as g,B as b,R as E,f as S,u as B,I as N}from"./ui-1b7a65b5.js";import{r as n}from"./wallet-06fca986.js";import{N as O}from"./NoAccount-5a1e4b09.js";import{i as R,a as z,T as H,u as q,b as K}from"./tokenAFn-a600fc2e.js";import{b as P}from"./main-ca78e815.js";import"./icons-3ccee795.js";function M(){const{connection:o,account:s,network:l}=I(),[V,a]=n.useState(""),[i,r]=n.useState(!1),[u,d]=n.useState(),A=w(),[m,C]=n.useState(),[p,x]=n.useState([!1]),[c,T]=n.useState(0),f=e=>{e&&T(e)};n.useEffect(()=>{(!o||!s)&&(console.log("redirect"),A(P)),o&&s&&!i&&(R(o,s).then(e=>{C(e),a("")}).catch(e=>{console.error(e),a(e)}),z(o,s).then(e=>{e?(x(e),a("")):(x([!1]),a(""))}).catch(e=>{console.error(e),a(e)}))},[o,s,i,u]);function _(){r(!1)}function v(){o&&s&&(r(!0),q(o,s).then(e=>{console.log("success then in add contract"),d(e),a("")}).catch(e=>{console.error(e),r(!1),a(e)}))}function y(){o&&s&&(r(!0),d(""),K(o,s,c*1e6).then(e=>{console.log("txn hash: "+e),d(e),a("")}).catch(e=>{console.error(e),r(!1),a(e)}))}return t.jsx(n.Suspense,{fallback:t.jsx(h,{}),children:o&&s?t.jsxs(k,{direction:"vertical",size:"middle",children:[t.jsxs(j,{title:"Your Token A data",style:{backgroundColor:g[0]},children:[t.jsxs("p",{children:["Token A balance: ",m?parseInt(m[0])/1e6:0," TOK_A "]}),t.jsxs("p",{children:["Is concordium-swap contract an operator of your account? ",p[0]?"✅ you can use this dispenser 😄":"❌ use bellow button to change that 😓"," "]}),o&&t.jsx(b,{type:"primary",loading:i,disabled:p[0],onClick:()=>v(),children:"Click to set concordium swap as operator for token A"})]}),t.jsx(j,{title:"Token A dispenser",style:{backgroundColor:g[0]},children:t.jsxs(k,{direction:"vertical",size:"middle",children:[t.jsxs(E,{style:{minWidth:"400px"},children:[t.jsx(S,{span:15,children:t.jsx(B,{min:1,max:100,onChange:f,value:typeof c=="number"?c:0})}),t.jsx(S,{span:4,children:t.jsx(N,{min:1,max:100,style:{margin:"0 16px"},value:c,onChange:f})})]}),t.jsxs(b,{type:"primary",loading:i,disabled:!p[0],onClick:()=>y(),children:["Send me ",c," token A please!"]})]})}),u&&t.jsx(H,{hash:u,connection:o,callback:_})]}):s?t.jsx(h,{}):t.jsx(O,{network:l==null?void 0:l.name})})}export{M as TokenAPage};

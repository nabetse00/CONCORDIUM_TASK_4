import{b as c,e as a}from"./wallet-0d6fe0b8.js";import{C as r,M as l}from"./contract-8d575f94.js";const i="//8DAQAAABIAAABiZWNvbWVfdGhlX3JpY2hlc3QBABQAAgAAAA0AAABtaW5pbXVtX3JhaXNlBQ8AAAByaWNoZXN0X21lc3NhZ2UWAgYAAAASAAAAYmVjb21lX3RoZV9yaWNoZXN0BBYCFQQAAAAKAAAAUGFyc2VFcnJvcgILAAAAT25seUFjY291bnQCGQAAAEFtb3VudEJlbG93Q3VycmVudFJpY2hlc3QCFwAAAEFtb3VudEJlbG93TWluaW11bVJhaXNlAgQAAAB2aWV3ARQAAwAAAA8AAAByaWNoZXN0X2FjY291bnQVAgAAAAQAAABOb25lAgQAAABTb21lAQEAAAALDwAAAHJpY2hlc3RfbWVzc2FnZRYCDQAAAG1pbmltdW1fcmFpc2UFEAAAAHZpZXdNaW5pbXVtUmFpc2UBBRIAAAB2aWV3UmljaGVzdEFkZHJlc3MBFQIAAAAHAAAAQWNjb3VudAEBAAAACwgAAABDb250cmFjdAEBAAAADBEAAAB2aWV3UmljaGVzdEFtb3VudAEKEgAAAHZpZXdSaWNoZXN0TWVzc2FnZQEWAgA",u={index:r.index,subindex:r.subIndex},f={contract:u,method:"become_the_richest.view"};async function w(t){return await p(t,u)}async function p(t,e){return c.withJsonRpcClient(t,n=>n.getInstanceInfo(e)).then(n=>n).catch(n=>{console.error(n)})}async function N(t){const e=await V(t,f);if((e==null?void 0:e.tag)==="success")return B(e);e&&console.error(new Error(JSON.stringify(e))),console.error(new Error("Invoke Result is undefined please check `invokeStateView`"))}async function V(t,e){return c.withJsonRpcClient(t,n=>n.invokeContract(e)).then(n=>n).catch(n=>{console.error(n)})}function b(t,e){return t.returnValue?a.deserializeReceiveReturnValue(a.toBuffer(t.returnValue,"hex"),a.toBuffer(i,"base64"),r.name,e):"this is undefined"}const B=t=>{const e=b(t,"view");return e.minimum_raise++,e};async function v(t,e,n,A){const s="become_the_richest",m=a.serializeUpdateContractParameters(r.name,s,A,a.toBuffer(i,"base64"),1),d=new a.CcdAmount(BigInt(n));if(await c.withJsonRpcClient(t,h=>h.invokeContract({method:`${r.name}.${s}`,contract:{index:r.index,subindex:r.subIndex},parameter:m,amount:d,energy:l}).then(o=>{if(!o||o.tag==="failure"){console.error(`update =====>
`,o);return}else return console.log(`update =====>
`,o),o}).catch(o=>{console.error(o)})))return console.log("invoke test ok! lets go to a real transaction"),t.signAndSendTransaction(e,a.AccountTransactionType.Update,{amount:d,address:u,receiveName:r.name+"."+s,maxContractExecutionEnergy:l},A,i,1)}async function Q(t,e){return await c.withJsonRpcClient(t,A=>A.getTransactionStatus(e)).then(A=>{if(A)return A;console.error(new Error("status is empty ? No internet ?"))}).catch(A=>{console.error(A)})}export{Q as a,w as g,N as i,v as u};
